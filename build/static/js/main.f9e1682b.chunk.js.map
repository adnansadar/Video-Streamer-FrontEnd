{"version":3,"sources":["apis/streams.js","actions/types.js","history.js","actions/index.js","components/GoogleAuth.js","components/Header.js","components/streams/StreamForm.js","components/streams/StreamCreate.js","components/Modal.js","components/streams/StreamDelete.js","components/streams/StreamEdit.js","components/streams/StreamList.js","components/streams/StreamShow.js","components/App.js","reducers/authReducer.js","reducers/streamReducer.js","reducers/index.js","index.js"],"names":["axios","create","baseURL","SIGN_IN","SIGN_OUT","CREATE_STREAM","FETCH_STREAMS","FETCH_STREAM","DELETE_STREAM","EDIT_STREAM","createBrowserHistory","fetchStream","id","dispatch","a","streams","get","response","type","payload","data","GoogleAuth","onAuthChange","isSignedIn","props","signIn","auth","currentUser","getId","signOut","onSignInClick","onSignOutClick","window","gapi","load","client","init","clientId","scope","then","auth2","getAuthInstance","listen","this","className","onClick","renderAuthButton","React","Component","connect","state","userId","Header","to","StreamForm","renderInput","input","label","meta","error","touched","autoComplete","renderError","onSubmit","formValues","handleSubmit","Field","name","component","reduxForm","form","validate","errors","title","description","StreamCreate","createStream","getState","post","history","push","Modal","ReactDOM","createPortal","onDismiss","e","stopPropagation","content","actions","document","querySelector","StreamDelete","match","params","deleteStream","stream","renderContent","renderActions","ownProps","delete","StreamEdit","editStream","initialValues","_","pick","patch","StreamList","fetchStreams","currentUserId","map","renderAdmin","style","textAlign","renderList","renderCreate","Object","values","StreamShow","videoRef","createRef","buildPlayer","player","destroy","flv","createPlayer","url","attachMediaElement","current","ref","width","controls","App","exact","path","INITIAL_STATE","authReducer","action","streamReducer","mapKeys","omit","combineReducers","formReducer","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","reducers","applyMiddleware","reduxThunk","render"],"mappings":"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","file":"static/js/main.f9e1682b.chunk.js","sourcesContent":["import axios from \"axios\";\n\nexport default axios.create({\n  baseURL: \"http://localhost:3001\",\n});\n","export const SIGN_IN = \"SIGN_IN\";\nexport const SIGN_OUT = \"SIGN_OUT\";\nexport const CREATE_STREAM = \"CREATE_STREAM\";\nexport const FETCH_STREAMS = \"FETCH_STREAMS\";\nexport const FETCH_STREAM = \"FETCH_STREAM\";\nexport const DELETE_STREAM = \"DELETE_STREAM\";\nexport const EDIT_STREAM = \"EDIT_STREAM\";\n","import { createBrowserHistory } from \"history\";\nexport default createBrowserHistory();\n","import streams from \"../apis/streams\";\nimport {\n  SIGN_IN,\n  SIGN_OUT,\n  CREATE_STREAM,\n  FETCH_STREAMS,\n  FETCH_STREAM,\n  DELETE_STREAM,\n  EDIT_STREAM,\n} from \"../actions/types\";\nimport history from \"../history\";\n\nexport const signIn = (userId) => {\n  return {\n    type: SIGN_IN,\n    payload: userId,\n  };\n};\n\nexport const signOut = () => {\n  return {\n    type: SIGN_OUT,\n  };\n};\n\nexport const createStream = (formValues) => async (dispatch, getState) => {\n  const { userId } = getState().auth;\n  const response = await streams.post(\"/streams\", { ...formValues, userId });\n  // adding the user id to formvalues to show delete/edit buttons to only logged in users\n  dispatch({ type: CREATE_STREAM, payload: response.data });\n  history.push(\"/\");\n  // forcibly navigating the user to homepage after creating the form\n};\n\nexport const fetchStreams = () => async (dispatch) => {\n  const response = await streams.get(\"/streams\");\n  dispatch({ type: FETCH_STREAMS, payload: response.data });\n};\n\nexport const fetchStream = (id) => async (dispatch) => {\n  const response = await streams.get(`/streams/${id}`);\n  dispatch({ type: FETCH_STREAM, payload: response.data });\n};\n\nexport const editStream = (id, formValues) => async (dispatch) => {\n  const response = await streams.patch(`/streams/${id}`, formValues);\n  dispatch({ type: EDIT_STREAM, payload: response.data });\n  history.push(\"/\");\n};\n\nexport const deleteStream = (id) => async (dispatch) => {\n  await streams.delete(`/streams/${id}`);\n  dispatch({ type: DELETE_STREAM, payload: id });\n  history.push(\"/\");\n};\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { signIn, signOut } from \"../actions\";\n\nclass GoogleAuth extends React.Component {\n  componentDidMount() {\n    window.gapi.load(\"client:auth2\", () => {\n      window.gapi.client\n        .init({\n          clientId:\n            \"797401886567-9cumct9mrt3v2va409rasa7fa6fq02hh.apps.googleusercontent.com\",\n          scope: \"email\",\n        })\n        // ClientID copied from the oath2 website for streamy\n        // scope= details we want from the user\n        .then(() => {\n          this.auth = window.gapi.auth2.getAuthInstance();\n          this.onAuthChange(this.auth.isSignedIn.get());\n          // setting state according to user signed in or not\n          this.auth.isSignedIn.listen(this.onAuthChange);\n          // listen for change in signin/signout\n        });\n    });\n  }\n\n  onAuthChange = (isSignedIn) => {\n    if (isSignedIn) {\n      this.props.signIn(this.auth.currentUser.get().getId());\n      // calls the action creator\n    } else {\n      this.props.signOut();\n      // calls the action creator\n    }\n  };\n\n  onSignInClick = () => {\n    this.auth.signIn();\n  };\n\n  onSignOutClick = () => {\n    this.auth.signOut();\n  };\n\n  renderAuthButton() {\n    if (this.props.isSignedIn === null) {\n      return null;\n    } else if (this.props.isSignedIn) {\n      return (\n        <button className=\"ui red google button\" onClick={this.onSignOutClick}>\n          <i className=\"google icon\" />\n          Sign Out\n        </button>\n      );\n    } else {\n      return (\n        <button className=\"ui red google button\" onClick={this.onSignInClick}>\n          <i className=\"google icon\" />\n          Sign In with Google\n        </button>\n      );\n    }\n  }\n\n  render() {\n    return <div>{this.renderAuthButton()}</div>;\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return { isSignedIn: state.auth.isSignedIn };\n};\n\nexport default connect(mapStateToProps, { signIn, signOut })(GoogleAuth);\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport GoogleAuth from \"./GoogleAuth\";\nconst Header = () => {\n  return (\n    <div className=\"ui secondary pointing menu\">\n      <Link to=\"/\" className=\"item\">\n        Streamy App\n      </Link>\n      <div className=\"right menu\">\n        <Link to=\"/\" className=\"item\">\n          All Streams\n        </Link>\n      </div>\n      <GoogleAuth />\n    </div>\n  );\n};\n\nexport default Header;\n","import React from \"react\";\nimport { Field, reduxForm } from \"redux-form\";\n\nclass StreamForm extends React.Component {\n  renderError({ error, touched }) {\n    if (touched && error) {\n      return (\n        <div className=\"ui error message\">\n          <div className=\"header\">{error}</div>\n        </div>\n      );\n    }\n  }\n  renderInput = ({ input, label, meta }) => {\n    const className = `field ${meta.error && meta.touched ? \"error\" : null}`;\n    return (\n      <div className={className}>\n        <label>{label}</label>\n        <input\n          // onChange={formProps.input.onChange}\n          // value={formProps.input.value}\n          {...input}\n          autoComplete=\"off\"\n        />\n        {this.renderError(meta)}\n      </div>\n    );\n  };\n  onSubmit = (formValues) => {\n    this.props.onSubmit(formValues);\n  };\n  render() {\n    return (\n      // handleSubmit is a method of redux form\n      <form\n        className=\"ui form error\"\n        onSubmit={this.props.handleSubmit(this.onSubmit)}\n      >\n        <Field name=\"title\" component={this.renderInput} label=\"Enter Text\" />\n        <Field\n          name=\"description\"\n          component={this.renderInput}\n          label=\"Enter Description\"\n        />\n        <button className=\"ui button primary\">Submit</button>\n      </form>\n    );\n  }\n}\n\nconst validate = (formValues) => {\n  const errors = {};\n  // return empty errors object if no errors else return key value pair\n  if (!formValues.title) {\n    errors.title = \"You must enter a title\";\n  }\n  if (!formValues.description) {\n    errors.description = \"You must enter a description\";\n  }\n  return errors;\n};\n\nexport default reduxForm({ form: \"streamForm\", validate })(StreamForm);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { createStream } from \"../../actions\";\nimport StreamForm from \"./StreamForm\";\nclass StreamCreate extends React.Component {\n  onSubmit = (formValues) => {\n    this.props.createStream(formValues);\n  };\n  render() {\n    return (\n      <div>\n        <h3>Create a Stream</h3>\n        <StreamForm onSubmit={this.onSubmit} />\n      </div>\n    );\n  }\n}\n\nexport default connect(null, { createStream })(StreamCreate);\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nconst Modal = (props) => {\n  return ReactDOM.createPortal(\n    <div onClick={props.onDismiss} className=\"ui dimmer modals visible active\">\n      <div\n        onClick={(e) => e.stopPropagation()}\n        className=\"ui standard modal visible active\"\n      >\n        <div className=\"header\">{props.title}</div>\n        <div className=\"content\">{props.content}</div>\n        <div className=\"actions\">{props.actions}</div>\n      </div>\n    </div>,\n    document.querySelector(\"#modal\")\n  );\n};\n\nexport default Modal;\n","import React from \"react\";\nimport Modal from \"../Modal\";\nimport history from \"../../history\";\nimport { fetchStream, deleteStream } from \"../../actions\";\nimport { connect } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\n\nclass StreamDelete extends React.Component {\n  componentDidMount() {\n    this.props.fetchStream(this.props.match.params.id);\n  }\n  renderActions() {\n    const { id } = this.props.match.params;\n    return (\n      <>\n        <button\n          onClick={() => this.props.deleteStream(id)}\n          className=\"ui button negative\"\n        >\n          Delete\n        </button>\n        <Link to=\"/\" className=\"ui button\">\n          Cancel\n        </Link>\n      </>\n    );\n  }\n\n  renderContent() {\n    if (!this.props.stream) {\n      return \"Are you sure you want to delete this stream? \";\n    } else {\n      return `Are you sure you want to delete the stream with the title: ${this.props.stream.title} `;\n    }\n  }\n\n  render() {\n    return (\n      <Modal\n        title=\"Delete Stream\"\n        content={this.renderContent()}\n        actions={this.renderActions()}\n        onDismiss={() => history.push(\"/\")}\n      />\n    );\n  }\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  return { stream: state.streams[ownProps.match.params.id] };\n};\n\nexport default connect(mapStateToProps, { fetchStream, deleteStream })(\n  StreamDelete\n);\n","import { React, Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { fetchStream, editStream } from \"../../actions\";\nimport StreamForm from \"./StreamForm\";\nimport _ from \"lodash\";\nclass StreamEdit extends Component {\n  componentDidMount() {\n    this.props.fetchStream(this.props.match.params.id);\n  }\n\n  onSubmit = (formValues) => {\n    this.props.editStream(this.props.match.params.id, formValues);\n  };\n\n  render() {\n    if (!this.props.stream) {\n      return <div>Loading....</div>;\n    }\n    return (\n      <div>\n        <h3>Edit a Stream</h3>\n        <StreamForm\n          initialValues={_.pick(this.props.stream, \"title\", \"description\")}\n          // initialValues is a Redux Form attribute this.props.stream consists of title and description which is passed\n          onSubmit={this.onSubmit}\n        />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  // console.log(ownProps);\n  return { stream: state.streams[ownProps.match.params.id] };\n};\n\nexport default connect(mapStateToProps, { fetchStream, editStream })(\n  StreamEdit\n);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { fetchStreams } from \"../../actions\";\nimport { Link } from \"react-router-dom\";\nclass StreamList extends React.Component {\n  componentDidMount() {\n    this.props.fetchStreams();\n  }\n\n  renderAdmin(stream) {\n    if (stream.userId === this.props.currentUserId) {\n      return (\n        <div className=\"right floated content\">\n          <Link to={`/streams/edit/${stream.id}`} className=\"ui button primary\">\n            Edit\n          </Link>\n          <Link\n            to={`/streams/delete/${stream.id}`}\n            className=\"ui button negative\"\n          >\n            Delete\n          </Link>\n        </div>\n      );\n    }\n  }\n\n  renderList() {\n    return this.props.streams.map((stream) => {\n      return (\n        <div className=\"item\" key={stream.id}>\n          {this.renderAdmin(stream)}\n          <i className=\"large middle aligned icon camera\" />\n          <div className=\"content\">\n            <Link to={`/streams/${stream.id}`}>{stream.title}</Link>\n            <div className=\"desciption\"> {stream.description}</div>\n          </div>\n        </div>\n      );\n    });\n  }\n\n  renderCreate() {\n    if (this.props.isSignedIn) {\n      return (\n        <div style={{ textAlign: \"right\" }}>\n          <Link to=\"/streams/new\" className=\"ui button primary\">\n            Create Stream\n          </Link>\n        </div>\n      );\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <h2>Streams</h2>\n        <div className=\"ui celled list\">{this.renderList()}</div>\n        {this.renderCreate()}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    streams: Object.values(state.streams),\n    currentUserId: state.auth.userId,\n    isSignedIn: state.auth.isSignedIn,\n  };\n};\n\nexport default connect(mapStateToProps, { fetchStreams })(StreamList);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { fetchStream } from \"../../actions\";\nimport flv from \"flv.js\";\n\nclass StreamShow extends React.Component {\n  constructor(props) {\n    super(props);\n    this.videoRef = React.createRef();\n  }\n  componentDidMount() {\n    const { id } = this.props.match.params;\n    this.props.fetchStream(id);\n    this.buildPlayer();\n  }\n\n  // if the stream is finally loaded after reloading, component will update and player building will be done again\n  componentDidUpdate() {\n    this.buildPlayer();\n  }\n\n  // stopping the player after the user switches to other page/closes stream show\n  componentWillUnmount() {\n    this.player.destroy();\n  }\n\n  buildPlayer() {\n    if (this.player || !this.props.stream) {\n      return;\n    }\n    const { id } = this.props.match.params;\n    // flv acts like axios over here(read http flv documentation )\n    this.player = flv.createPlayer({\n      type: \"flv\",\n      url: `http://localhost:8000/live/${id}.flv`,\n    });\n    this.player.attachMediaElement(this.videoRef.current);\n    this.player.load();\n  }\n\n  render() {\n    if (!this.props.stream) {\n      return <div>Loading...</div>;\n    }\n    const { title, description } = this.props.stream;\n    return (\n      <div>\n        <video ref={this.videoRef} style={{ width: \"100%\" }} controls />\n        <h1>{title}</h1>\n        <h5>{description}</h5>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  const { id } = ownProps.match.params;\n  return { stream: state.streams[id] };\n};\n\nexport default connect(mapStateToProps, { fetchStream })(StreamShow);\n","import React, { Component } from \"react\";\nimport { Router, Route, Switch } from \"react-router-dom\";\nimport Header from \"./Header\";\nimport StreamCreate from \"./streams/StreamCreate\";\nimport StreamDelete from \"./streams/StreamDelete\";\nimport StreamEdit from \"./streams/StreamEdit\";\nimport StreamList from \"./streams/StreamList\";\nimport StreamShow from \"./streams/StreamShow\";\nimport history from \"../history\";\n// Each router creates a history object that it uses to keep track of the current location and re-renders the application whenever this location changes. For this reason, the other React Router components rely on this history object being present; which is why they need to be rendered inside a router.\n// The BrowserRouter uses the HTML5 history API to keep the user interface in sync with the URL in the browser address bar.\nexport default class App extends Component {\n  render() {\n    return (\n      <div className=\"ui container\">\n        <Router history={history}>\n          <div>\n            <Header />\n            <Switch>\n              <Route exact path=\"/\" component={StreamList}></Route>\n              <Route exact path=\"/streams/new\" component={StreamCreate}></Route>\n              <Route\n                exact\n                path=\"/streams/edit/:id\"\n                // : is used to store id as params inside ReactRouterDOM's props passed to StreamEdit\n                component={StreamEdit}\n              ></Route>\n              <Route\n                exact\n                path=\"/streams/delete/:id\"\n                component={StreamDelete}\n              ></Route>\n              <Route exact path=\"/streams/:id\" component={StreamShow}></Route>\n            </Switch>\n          </div>\n        </Router>\n      </div>\n    );\n  }\n}\n","import { SIGN_IN, SIGN_OUT } from \"../actions/types\";\nconst INITIAL_STATE = {\n  isSignedIn: null,\n  userId: null,\n};\n\nconst authReducer = (state = INITIAL_STATE, action) => {\n  switch (action.type) {\n    case SIGN_IN:\n      return { ...state, isSignedIn: true, userId: action.payload };\n    case SIGN_OUT:\n      return { ...state, isSignedIn: false, userId: null };\n    default:\n      return state;\n  }\n};\n\nexport default authReducer;\n","import {\n  CREATE_STREAM,\n  FETCH_STREAM,\n  FETCH_STREAMS,\n  EDIT_STREAM,\n  DELETE_STREAM,\n} from \"../actions/types\";\nimport _ from \"lodash\";\n\nconst streamReducer = (state = {}, action) => {\n  switch (action.type) {\n    case FETCH_STREAMS:\n      return { ...state, ..._.mapKeys(action.payload, \"id\") };\n    //   mapkeys converts action.payload array into an object and also maps a key(id) to it\n    case FETCH_STREAM:\n      return { ...state, [action.payload.id]: action.payload };\n    case CREATE_STREAM:\n      return { ...state, [action.payload.id]: action.payload };\n    case EDIT_STREAM:\n      return { ...state, [action.payload.id]: action.payload };\n    case DELETE_STREAM:\n      return _.omit(state, action.payload);\n    default:\n      return state;\n  }\n};\n\nexport default streamReducer;\n","import { combineReducers } from \"redux\";\nimport authReducer from \"./authReducer\";\nimport { reducer as formReducer } from \"redux-form\";\nimport streamReducer from \"./streamReducer\";\n\nexport default combineReducers({\n  auth: authReducer,\n  form: formReducer,\n  streams: streamReducer,\n});\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\nimport { Provider } from \"react-redux\";\nimport { createStore, applyMiddleware, compose } from \"redux\";\nimport reduxThunk from \"redux-thunk\";\nimport reducers from \"./reducers\";\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst store = createStore(\n  reducers,\n  composeEnhancers(applyMiddleware(reduxThunk))\n);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.querySelector(\"#root\")\n);\n"],"sourceRoot":""}
{"ast":null,"code":"import _classCallCheck from\"/home/adnan/Documents/Video-Streaming-App/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/adnan/Documents/Video-Streaming-App/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/adnan/Documents/Video-Streaming-App/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/adnan/Documents/Video-Streaming-App/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{connect}from\"react-redux\";import{signIn,signOut}from\"../actions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var GoogleAuth=/*#__PURE__*/function(_React$Component){_inherits(GoogleAuth,_React$Component);var _super=_createSuper(GoogleAuth);function GoogleAuth(){var _this;_classCallCheck(this,GoogleAuth);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.onAuthChange=function(isSignedIn){if(isSignedIn){_this.props.signIn(_this.auth.currentUser.get().getId());// calls the action creator\n}else{_this.props.signOut();// calls the action creator\n}};_this.onSignInClick=function(){_this.auth.signIn();};_this.onSignOutClick=function(){_this.auth.signOut();};return _this;}_createClass(GoogleAuth,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;window.gapi.load(\"client:auth2\",function(){window.gapi.client.init({clientId:\"797401886567-9cumct9mrt3v2va409rasa7fa6fq02hh.apps.googleusercontent.com\",scope:\"email\"})// ClientID copied from the oath2 website for streamy\n// scope= details we want from the user\n.then(function(){_this2.auth=window.gapi.auth2.getAuthInstance();_this2.onAuthChange(_this2.auth.isSignedIn.get());// setting state according to user signed in or not\n_this2.auth.isSignedIn.listen(_this2.onAuthChange);// listen for change in signin/signout\n});});}},{key:\"renderAuthButton\",value:function renderAuthButton(){if(this.props.isSignedIn===null){return null;}else if(this.props.isSignedIn){return/*#__PURE__*/_jsxs(\"button\",{className:\"ui red google button\",onClick:this.onSignOutClick,children:[/*#__PURE__*/_jsx(\"i\",{className:\"google icon\"}),\"Sign Out\"]});}else{return/*#__PURE__*/_jsxs(\"button\",{className:\"ui red google button\",onClick:this.onSignInClick,children:[/*#__PURE__*/_jsx(\"i\",{className:\"google icon\"}),\"Sign In with Google\"]});}}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{children:this.renderAuthButton()});}}]);return GoogleAuth;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{isSignedIn:state.auth.isSignedIn};};export default connect(mapStateToProps,{signIn:signIn,signOut:signOut})(GoogleAuth);","map":{"version":3,"sources":["/home/adnan/Documents/Video-Streaming-App/client/src/components/GoogleAuth.js"],"names":["React","connect","signIn","signOut","GoogleAuth","onAuthChange","isSignedIn","props","auth","currentUser","get","getId","onSignInClick","onSignOutClick","window","gapi","load","client","init","clientId","scope","then","auth2","getAuthInstance","listen","renderAuthButton","Component","mapStateToProps","state"],"mappings":"4oBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,MAAT,CAAiBC,OAAjB,KAAgC,YAAhC,C,2FAEMC,CAAAA,U,uVAqBJC,Y,CAAe,SAACC,UAAD,CAAgB,CAC7B,GAAIA,UAAJ,CAAgB,CACd,MAAKC,KAAL,CAAWL,MAAX,CAAkB,MAAKM,IAAL,CAAUC,WAAV,CAAsBC,GAAtB,GAA4BC,KAA5B,EAAlB,EACA;AACD,CAHD,IAGO,CACL,MAAKJ,KAAL,CAAWJ,OAAX,GACA;AACD,CACF,C,OAEDS,a,CAAgB,UAAM,CACpB,MAAKJ,IAAL,CAAUN,MAAV,GACD,C,OAEDW,c,CAAiB,UAAM,CACrB,MAAKL,IAAL,CAAUL,OAAV,GACD,C,uEApCD,4BAAoB,iBAClBW,MAAM,CAACC,IAAP,CAAYC,IAAZ,CAAiB,cAAjB,CAAiC,UAAM,CACrCF,MAAM,CAACC,IAAP,CAAYE,MAAZ,CACGC,IADH,CACQ,CACJC,QAAQ,CACN,0EAFE,CAGJC,KAAK,CAAE,OAHH,CADR,CAME;AACA;AAPF,CAQGC,IARH,CAQQ,UAAM,CACV,MAAI,CAACb,IAAL,CAAYM,MAAM,CAACC,IAAP,CAAYO,KAAZ,CAAkBC,eAAlB,EAAZ,CACA,MAAI,CAAClB,YAAL,CAAkB,MAAI,CAACG,IAAL,CAAUF,UAAV,CAAqBI,GAArB,EAAlB,EACA;AACA,MAAI,CAACF,IAAL,CAAUF,UAAV,CAAqBkB,MAArB,CAA4B,MAAI,CAACnB,YAAjC,EACA;AACD,CAdH,EAeD,CAhBD,EAiBD,C,gCAoBD,2BAAmB,CACjB,GAAI,KAAKE,KAAL,CAAWD,UAAX,GAA0B,IAA9B,CAAoC,CAClC,MAAO,KAAP,CACD,CAFD,IAEO,IAAI,KAAKC,KAAL,CAAWD,UAAf,CAA2B,CAChC,mBACE,gBAAQ,SAAS,CAAC,sBAAlB,CAAyC,OAAO,CAAE,KAAKO,cAAvD,wBACE,UAAG,SAAS,CAAC,aAAb,EADF,cADF,CAMD,CAPM,IAOA,CACL,mBACE,gBAAQ,SAAS,CAAC,sBAAlB,CAAyC,OAAO,CAAE,KAAKD,aAAvD,wBACE,UAAG,SAAS,CAAC,aAAb,EADF,yBADF,CAMD,CACF,C,sBAED,iBAAS,CACP,mBAAO,qBAAM,KAAKa,gBAAL,EAAN,EAAP,CACD,C,wBA7DsBzB,KAAK,CAAC0B,S,EAgE/B,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,KAAD,CAAW,CACjC,MAAO,CAAEtB,UAAU,CAAEsB,KAAK,CAACpB,IAAN,CAAWF,UAAzB,CAAP,CACD,CAFD,CAIA,cAAeL,CAAAA,OAAO,CAAC0B,eAAD,CAAkB,CAAEzB,MAAM,CAANA,MAAF,CAAUC,OAAO,CAAPA,OAAV,CAAlB,CAAP,CAA8CC,UAA9C,CAAf","sourcesContent":["import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { signIn, signOut } from \"../actions\";\n\nclass GoogleAuth extends React.Component {\n  componentDidMount() {\n    window.gapi.load(\"client:auth2\", () => {\n      window.gapi.client\n        .init({\n          clientId:\n            \"797401886567-9cumct9mrt3v2va409rasa7fa6fq02hh.apps.googleusercontent.com\",\n          scope: \"email\",\n        })\n        // ClientID copied from the oath2 website for streamy\n        // scope= details we want from the user\n        .then(() => {\n          this.auth = window.gapi.auth2.getAuthInstance();\n          this.onAuthChange(this.auth.isSignedIn.get());\n          // setting state according to user signed in or not\n          this.auth.isSignedIn.listen(this.onAuthChange);\n          // listen for change in signin/signout\n        });\n    });\n  }\n\n  onAuthChange = (isSignedIn) => {\n    if (isSignedIn) {\n      this.props.signIn(this.auth.currentUser.get().getId());\n      // calls the action creator\n    } else {\n      this.props.signOut();\n      // calls the action creator\n    }\n  };\n\n  onSignInClick = () => {\n    this.auth.signIn();\n  };\n\n  onSignOutClick = () => {\n    this.auth.signOut();\n  };\n\n  renderAuthButton() {\n    if (this.props.isSignedIn === null) {\n      return null;\n    } else if (this.props.isSignedIn) {\n      return (\n        <button className=\"ui red google button\" onClick={this.onSignOutClick}>\n          <i className=\"google icon\" />\n          Sign Out\n        </button>\n      );\n    } else {\n      return (\n        <button className=\"ui red google button\" onClick={this.onSignInClick}>\n          <i className=\"google icon\" />\n          Sign In with Google\n        </button>\n      );\n    }\n  }\n\n  render() {\n    return <div>{this.renderAuthButton()}</div>;\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return { isSignedIn: state.auth.isSignedIn };\n};\n\nexport default connect(mapStateToProps, { signIn, signOut })(GoogleAuth);\n"]},"metadata":{},"sourceType":"module"}